1
00:00:13,270 --> 00:00:18,451
Теперь рассмотрим открытые

2
00:00:18,451 --> 00:00:22,570
источники финансовых и экономических
данных, доступные в Интернете.

3
00:00:22,570 --> 00:00:30,550
Ну, пожалуй,
самые известные — это Google и Yahoo,

4
00:00:30,550 --> 00:00:35,060
то есть,
если мы наберем finance.google.com,

5
00:00:35,060 --> 00:00:43,637
то мы получим финансовую
базу данных Гугла.

6
00:00:43,637 --> 00:00:49,210
Здесь, соответственно, у нас есть
информация о куче цен различных компаний.

7
00:00:49,210 --> 00:00:57,190
Аналогично можно посмотреть
finance.yahoo.com.

8
00:01:04,575 --> 00:01:11,960
Мы автоматически будем скачивать
данные с этих источников.

9
00:01:11,960 --> 00:01:17,710
Также открытой базой данных,
не только финансовых, но и многих других,

10
00:01:17,710 --> 00:01:22,220
социальных, но и не только,
показателей является Quandl.

11
00:01:28,515 --> 00:01:32,479
Здесь можно, например,
взять загрузить свой набор данных,

12
00:01:32,479 --> 00:01:38,123
добавить к нему описание,
и он будет публично доступен другим людям.

13
00:01:38,123 --> 00:01:44,570
Из широко известных русских
источников можно назвать Финам.

14
00:01:51,380 --> 00:01:56,396
И в рамках Высшей школы экономики

15
00:01:56,396 --> 00:02:02,290
существует sophist.hse.ru,

16
00:02:02,290 --> 00:02:07,803
где содержатся также данные по многим

17
00:02:07,803 --> 00:02:12,750
статистическим рядам.

18
00:02:12,750 --> 00:02:18,538
Теперь попробуем загрузить
эти данные в R автоматически.

19
00:02:18,538 --> 00:02:23,232
Это я привел пример пяти достаточно
крупных, четырех достаточно крупных

20
00:02:23,232 --> 00:02:29,490
источников данных, и, соответственно,
здесь все загружается автоматически.

21
00:02:29,490 --> 00:02:33,540
Давайте рассмотрим на примере,
ну, каждый на примере.

22
00:02:33,540 --> 00:02:35,548
Например, sophist.hse.ru.

23
00:02:35,548 --> 00:02:40,587
Открываем его, вот выбираем какой-нибудь
статистический ряд, например,

24
00:02:40,587 --> 00:02:44,933
по населению и трудовым ресурсам,
численность населения.

25
00:02:44,933 --> 00:02:50,104
Мы видим, что показатели годовые,
и показатель называется POPNUM_Y.

26
00:02:50,104 --> 00:02:55,988
Вот нам потребуется только название этого
показателя, чтобы загрузить его в R.

27
00:02:55,988 --> 00:02:56,710
POPNUM_Y.

28
00:02:56,710 --> 00:03:03,692
Соответственно, выбираем,
загружаем в набор данных.

29
00:03:03,692 --> 00:03:10,320
Значит, здесь напишем: загрузка данных,
загрузка данных,

30
00:03:10,320 --> 00:03:16,020
a поместим sophisthse,

31
00:03:16,020 --> 00:03:22,079
и набор данных назывался POPNUM_Y.

32
00:03:22,079 --> 00:03:24,900
Запускаем.

33
00:03:24,900 --> 00:03:29,380
Загрузка занимает какие-то время,
и мы можем посмотреть на результат.

34
00:03:29,380 --> 00:03:34,133
Вот, показатель численность
населения России,

35
00:03:34,133 --> 00:03:38,550
соответственно, с 91-го по
14-й год как менялось.

36
00:03:38,550 --> 00:03:43,160
Теперь давайте загрузим
какой-нибудь пример данных

37
00:03:43,160 --> 00:03:48,300
с Quandl.

38
00:03:48,300 --> 00:03:51,790
Теперь рассмотрим набор Quandl.

39
00:03:51,790 --> 00:03:55,990
b равняется Quandl,

40
00:03:55,990 --> 00:04:00,978
и тут укажем, пусть это будет GNP

41
00:04:00,978 --> 00:04:06,060
— валовый национальный продукт.

42
00:04:06,060 --> 00:04:11,353
Вот у нас загрузился набор

43
00:04:11,353 --> 00:04:16,133
данных b по валовому
национальному продукту,

44
00:04:16,133 --> 00:04:21,370
Quandl это FRED/GNP — это,
соответственно, американские данные.

45
00:04:21,370 --> 00:04:27,450
Quandl вывел предупреждение о том,
что без регистрации на

46
00:04:27,450 --> 00:04:33,220
Quandl загрузка какого-то ограниченного
количества, типа 50 наборов в день.

47
00:04:33,220 --> 00:04:34,920
Eсли вы хотите загружать больше,

48
00:04:34,920 --> 00:04:37,350
вы можете зарегистрироваться
там и загружать больше.

49
00:04:37,350 --> 00:04:44,340
Теперь загрузим цены акций, например,
компании Apple с сайта google.finance,

50
00:04:44,340 --> 00:04:48,830
finance.google.com.

51
00:04:53,300 --> 00:04:58,262
Здесь нам нужна маленькая
хитрость из-за того,

52
00:04:58,262 --> 00:05:03,240
что месяца по-русски будут не так,
как по английски

53
00:05:03,240 --> 00:05:08,408
называются, то поэтому при чтении дат
происходит иногда маленькая проблемка.

54
00:05:08,408 --> 00:05:12,130
Чтобы ее избежать,
нам потребуется одна маленькая настройка.

55
00:05:12,130 --> 00:05:17,220
Sys.

56
00:05:17,220 --> 00:05:25,715
setlocale("LC_ TIME","c").

57
00:05:25,715 --> 00:05:28,110
setlocale("LC_ TIME","c").

58
00:05:28,110 --> 00:05:35,712
Мы настроим локаль, чтобы она
была больше похожа на английскую.

59
00:05:35,712 --> 00:05:41,638
После этого у нас без запинки
прочитаются цены акций с Гугла,

60
00:05:41,638 --> 00:05:46,799
даже если у вас русскоязычная
версия Windows.

61
00:05:46,799 --> 00:05:52,350
Выбираем желаемое название компании,
Apple сокращается AAPL,

62
00:05:52,350 --> 00:05:57,670
соответствующие названия компаний
можно посмотреть на сайте Гугла.

63
00:05:57,670 --> 00:06:02,981
Данные мы берем с какой-нибудь
конкретной даты, с 2010-го, скажем,

64
00:06:02,981 --> 00:06:09,650
01-01 по 2014-й, пусть будет 02-03,

65
00:06:09,650 --> 00:06:14,850
и источник,
откуда мы загружаем данные — google.

66
00:06:14,850 --> 00:06:19,080
Исполняем эту команду,

67
00:06:19,080 --> 00:06:22,818
и мы получаем акции компании Apple.

68
00:06:22,818 --> 00:06:27,377
Можно посмотреть на начало таблички, AAPL.

69
00:06:27,377 --> 00:06:31,326
Здесь у нас цена открытия,
максимальная цена,

70
00:06:31,326 --> 00:06:35,054
минимальная цена,
цена закрытия и объем торгов.

71
00:06:35,054 --> 00:06:37,431
И, соответственно, хвостик таблички.

72
00:06:37,431 --> 00:06:41,425
Всегда при загрузке данных из любых
источников проверяйте, смотрите,

73
00:06:41,425 --> 00:06:43,780
что загрузилось именно то, что вы хотели.

74
00:06:43,780 --> 00:06:48,443
Если вы хотите выбрать Yahoo,
то, соответственно, какие-то

75
00:06:48,443 --> 00:06:53,340
цены по некоторым акциям представлены на
Yahoo, вот здесь меняется Google на Yahoo.

76
00:06:53,340 --> 00:07:01,800
И, соответственно, загрузка данных
с российского источника finam.ru.

77
00:07:01,800 --> 00:07:05,420
Выбираем getsymbols.

78
00:07:05,420 --> 00:07:10,620
Давайте загрузим акции Газпрома.

79
00:07:10,620 --> 00:07:17,270
symbols равняется Gazprom,
он сокращается- четыре буквы GAZP.

80
00:07:17,270 --> 00:07:22,930
Ну и тоже мы указываем даты, с две
тысячи пусть будет одиннадцатого, 01-02,

81
00:07:22,930 --> 00:07:28,880
по 2014.

82
00:07:28,880 --> 00:07:36,290
09-09, и источник мы указываем

83
00:07:36,290 --> 00:07:44,290
finam.

84
00:07:44,290 --> 00:07:51,148
После того как вы загрузили ваши данные,

85
00:07:51,148 --> 00:07:55,887
обязательно смотрите на
начало таблички head (GAZP).

86
00:07:55,887 --> 00:08:01,569
Мы тут видим, что у нас он в январе,
первые дни не загрузились.

87
00:08:01,569 --> 00:08:06,383
Но это нормально, потому что там
нерабочие дни, поэтому, соответственно,

88
00:08:06,383 --> 00:08:09,960
не с 01.02,
а с 01.11 имеются котировки акций.

89
00:08:09,960 --> 00:08:14,615
И смотрим на хвостик таблички: Газпром,

90
00:08:14,615 --> 00:08:20,350
и вот у нас загрузилось по 2014.09.10,
опять же это цена

91
00:08:20,350 --> 00:08:25,920
открытия акций Газпрома, максимальная,
минимальная, закрытия и объем торгов.

92
00:08:25,920 --> 00:08:29,990
Соответственно, с котировками,

93
00:08:29,990 --> 00:08:34,812
которые получаются с помощью команды
getsymbols, они возвращают стандартный

94
00:08:34,812 --> 00:08:39,665
многомерный временной ряд в формате xts,
и можно строить различные графики,

95
00:08:39,665 --> 00:08:44,050
например, самый простой дефолтный
график можно построить.

96
00:08:48,680 --> 00:08:54,374
Сейчас мы отмасштабируем,
вот отмасштабировался график,

97
00:08:54,374 --> 00:08:58,930
и, соответственно, как менялись
акции Газпрома с 2011 по 2014.

98
00:08:58,930 --> 00:09:03,443
Графиков для временных рядов можно
построить очень много разных.

99
00:09:03,443 --> 00:09:08,483
Давайте, например,
построим четыре цены: открытия, закрытия,

100
00:09:08,483 --> 00:09:13,360
минимальную и максимальную на
одном графике: au_toplot (GAZPOM).

101
00:09:13,360 --> 00:09:18,028
Нам нужно первые четыре столбца,
последний пятый отвечает за объем торгов,

102
00:09:18,028 --> 00:09:20,460
он совершенно в других единицах измерения.

103
00:09:20,460 --> 00:09:25,298
Ну и нам построить вот по
соседству четыре графика, можно,

104
00:09:25,298 --> 00:09:30,190
соответственно, построить
четыре графика на одном,

105
00:09:30,190 --> 00:09:37,630
здесь выбрать facets = 2.

106
00:09:37,630 --> 00:09:45,092
И увидеть, что они практически идентичны.

107
00:09:45,092 --> 00:09:50,616
Для тех,
кто занимается техническим анализом,

108
00:09:50,616 --> 00:09:55,059
в R, конечно,
реализованы свои специальные графики.

109
00:09:55,059 --> 00:10:01,770
Например, можно построить
chartSeries от Газпром.

110
00:10:01,770 --> 00:10:07,760
Вот такой график,
в котором внизу автоматом построены,

111
00:10:07,760 --> 00:10:15,310
объемы торгов нанесены.

