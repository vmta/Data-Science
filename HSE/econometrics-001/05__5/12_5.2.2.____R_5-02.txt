
﻿1
00:00:13,560 --> 00:00:18,890
Маленький фрагмент «Написание циклов в R».
Как в любом уважающем себя языке
программирования, в R можно писать циклы.
Правда, в R, как правило,
из-за ориентированности
на обработку статистической информации
циклы приходится писать довольно редко, и,
как правило, если у новичка
возникает желание писать цикл в R,
скорее всего,
надо просто поискать какую-то функцию,
которая уже делает эту задачу,
которую уже кто-то написал.
Но всё-таки в редких случаях приходится
писать циклы и, соответственно,
сейчас мы научимся это делать.
Давайте сначала напишем
маленький игрушечный цикл,
который перебирает числа от пяти до десяти
и печатает их сами и их квадраты на экран.
Соответственно, мы задаём цикл,
цикл задаётся командой for.
i пробегает значения, i in, от 5 до 10.
А в фигурных скобках идёт тело цикла.
Мы должны посчитать некую переменную,
давайте назовём её k,
которая будет равна i в квадрате.
И, соответственно,
напечатать сообщение, что i = i,
а i в квадрате = k.
И особый символ \n,
что означает перевод на следующую строчку.
Теперь мы можем запустить наш
цикл и посмотреть на результат.
Соответственно, компьютер пробегает
числа и меняется от пяти до десяти: 5,
6, 7, 8, 9, 10.
И считается автоматом i-квадрат.
Одна из задач, с которой,
например, могут помочь циклы,
это чтение большого количества файлов.
Если у вас есть большое количество
исходных данных, каждая из которых...
каждая табличка исходных данных
занесена в файл со своим именем,
то вы можете прочитать их одним махом.
Давайте разберём это на простом примере.
Установим, давайте
установим рабочую папку...
Сохраним наш файл.
Это будет
cycle_demo.R.
Установим рабочую папку по
месту нахождения файла.
Там у нас находятся две
маленькие таблички,
которые изображают из себя большое
количество наборов данных.
Мы рассмотрим загрузку двух
табличек с помощью цикла.
Одна из них называется file01.csv,
вторая называется file02.csv.
У нас есть желание получить на выходе
большую табличку с названием all_data,
куда будут загружены
данные из всех файлов.
И мы начинаем с того,
что all_data — это пустой набор данных.
После этого мы пишем цикл for.
Бегающая переменная i, она может быть
не только числовой, но и текстовой.
Ну, например...
И назвать её можно не только i.
Давайте назовём её fname,
что будет означать «имя файла».
«Имя файла» у нас принимает
значение либо file01.csv,
либо file02.csv.
Соответственно, компьютер переберёт
в переменную fname по очереди два
значения: file01.csv, file02.csv.
И снова в фигурных скобках тело цикла.
Загружаем набор данных в
какую-нибудь переменную temp.
Соответственно, read.csv
из файла под названием fname.
И дальше нам надо присоединить уже
набранный all_data с
очередным файлом temp.
Соответственно, новая
all_data будет равно rbind,
то есть подклеить строчки к низу,
старый файл all_data и текущий файл temp.
Запускаем наш маленький цикл,
и на выходе получаем
табличку с данными all_data,
где находятся все загруженные
переменные из всех файлов.
Конец блока «Написание циклов в R».

