1
00:00:12,010 --> 00:00:18,750
Приступим к нашему первому анализу данных.

2
00:00:18,750 --> 00:00:20,545
Создаем новый скрипт.

3
00:00:20,545 --> 00:00:24,320
В начале скрипта нам
потребуется четыре пакета.

4
00:00:24,320 --> 00:00:28,520
Соответственно, вы должны
самостоятельно установить эти пакеты.

5
00:00:28,520 --> 00:00:32,560
Нам понадобятся следующие пакеты,
мы напишем, мы будем использовать пакет

6
00:00:32,560 --> 00:00:37,239
psych, – это, соответственно,

7
00:00:37,239 --> 00:00:41,210
пакет, в котором мы будем использовать
всякие описательные статистики удобно.

8
00:00:41,210 --> 00:00:46,991
Мы будем использовать пакет
dplyr для обработки данных,

9
00:00:46,991 --> 00:00:52,194
будем использовать пакет
ggplot2 для симпатичных

10
00:00:52,194 --> 00:00:59,815
графиков и будем использовать пакет
GGally для матрицы диаграмм рассеяния.

11
00:00:59,815 --> 00:01:06,065
Ну, давайте сразу быстро пробежимся,
над каждой командой нажмем Ctrl + Enter.

12
00:01:06,065 --> 00:01:09,006
Раз, два, три, четыре.

13
00:01:09,006 --> 00:01:14,871
Если компьютер выдал не предупреждение,
как у меня, а ошибку, что пакета нет,

14
00:01:14,871 --> 00:01:19,180
соответственно, вам нужно установить
пакет через Tools – Install Packages.

15
00:01:19,180 --> 00:01:24,525
В R существует много встроенных
наборов данных, давайте возьмем,

16
00:01:24,525 --> 00:01:29,960
рассмотрим исторический набор
данных по автомобилям 1920-х годов.

17
00:01:29,960 --> 00:01:35,340
Мы возьмем табличку, которая называется
cars, и для удобства, чтобы не писать все

18
00:01:35,340 --> 00:01:40,010
время cars, мы ее поместим в переменную,
пусть будет, d, это будут наши данные.

19
00:01:40,010 --> 00:01:44,300
Еще раз: cars – это
встроенный в R набор данных.

20
00:01:44,300 --> 00:01:45,998
Давайте посмотрим на него.

21
00:01:45,998 --> 00:01:50,383
Когда у вас есть набор данных,
то на него, конечно, нужно посмотреть.

22
00:01:50,383 --> 00:01:54,546
Набираем команду glimpse,
это означает бросить взгляд на набор d.

23
00:01:54,546 --> 00:01:59,375
Соответственно, мы здесь видим, что в
нашей табличке d есть две переменные:

24
00:01:59,375 --> 00:02:04,530
speed, ну, можно догадаться, что это
скорость, и dist, это какая-то дистанция.

25
00:02:04,530 --> 00:02:08,663
Соответственно, про ваш набор данных,
который есть у вас, вы, конечно,

26
00:02:08,663 --> 00:02:11,717
сами должны знать,
какая переменная что там означает,

27
00:02:11,717 --> 00:02:16,979
но поскольку набор данных cars встроен
в R, то поэтому можно вызвать справку

28
00:02:16,979 --> 00:02:21,850
help(cars) и посмотреть,
что там означает каждая переменная.

29
00:02:21,850 --> 00:02:26,932
И вот здесь мы видим, что это набор
данных: 50 наблюдений, две переменных,

30
00:02:26,932 --> 00:02:31,510
speed – это скорость машины
в mph (это мили в час),

31
00:02:31,510 --> 00:02:37,470
и dist – это длина
тормозного пути в футах.

32
00:02:37,470 --> 00:02:43,868
Соответственно, что еще можно сделать с
набором данных, когда он у вас загружен?

33
00:02:43,868 --> 00:02:48,689
Когда вы загружаете какой-то большой
набор данных, то неплохо бы проверить,

34
00:02:48,689 --> 00:02:54,085
что все корректно перенеслось в R, то есть
посмотреть на начало таблички head(d),

35
00:02:54,085 --> 00:03:00,801
это первые шесть наблюдений, посмотреть
на хвостик, конец таблички tail(d),

36
00:03:00,801 --> 00:03:06,744
можно посмотреть описательные
статистики describe(d).

37
00:03:06,744 --> 00:03:11,349
Соответственно, мы видим,
что вот у нас есть переменная speed,

38
00:03:11,349 --> 00:03:15,138
скорость, число наблюдений – 50,
среднее – 15,40,

39
00:03:15,138 --> 00:03:18,850
стандартное отклонение – 5,29,
медиана – 15 и так далее.

40
00:03:18,850 --> 00:03:22,753
И, соответственно,
тормозной путь – 50 наблюдений,

41
00:03:22,753 --> 00:03:27,671
среднее – 42 фута, стандартное
отклонение – 25 футов и так далее.

42
00:03:27,671 --> 00:03:33,412
Минимальный, максимальный, разница
между минимум и максимум и так далее.

43
00:03:33,412 --> 00:03:39,485
Точно также можно посмотреть количество
наблюдений отдельно, извините,

44
00:03:39,485 --> 00:03:45,230
количество столбцов, количество переменных
ncol(d) (number of columns), две колонки,

45
00:03:45,230 --> 00:03:50,620
число строк, то есть количество
наблюдений, (number of rows) nrow(d),

46
00:03:50,620 --> 00:03:56,120
и полезно еще посмотреть
структуру набора данных d str(d).

47
00:03:56,120 --> 00:04:01,146
Соответственно, здесь будет сказано,
что это объект типа data.frame,

48
00:04:01,146 --> 00:04:05,527
50 наблюдений, две переменных,
название переменной, тип,

49
00:04:05,527 --> 00:04:09,560
что каждая из них числовая,
и первые несколько наблюдений.

50
00:04:09,560 --> 00:04:13,521
Соответственно, можно из набора данных

51
00:04:13,521 --> 00:04:18,046
d извлечь отдельный вектор и
работать с отдельными векторами.

52
00:04:18,046 --> 00:04:21,198
Например, если я хочу посчитать
среднюю скорость руками,

53
00:04:21,198 --> 00:04:25,631
то я могу набрать среднее d,
$ и скорость хранится в переменной speed.

54
00:04:25,631 --> 00:04:28,483
Соответственно, нажимаю Ctrl + Enter,

55
00:04:28,483 --> 00:04:33,620
получаю среднюю скорость в табличке d.

56
00:04:33,620 --> 00:04:36,768
Когда у вас есть данные, то, как правило,

57
00:04:36,768 --> 00:04:40,695
нужна какая-то предварительная
обработка данных.

58
00:04:40,695 --> 00:04:44,896
У нас данные представлены,
скорость в милях в час,

59
00:04:44,896 --> 00:04:47,770
а длина тормозного пути — в футах.

60
00:04:47,770 --> 00:04:52,594
Русскоязычному человеку

61
00:04:52,594 --> 00:04:56,625
это не совсем удобно,
привычней километры в час и,

62
00:04:56,625 --> 00:05:01,354
соответственно, метры, поэтому нам надо
изменить переменные для того чтобы нам

63
00:05:01,354 --> 00:05:06,550
самим было удобней понимать,
и для этого используется команда mutate.

64
00:05:06,550 --> 00:05:10,715
Соответственно, mutate, эта команда
означает изменить набор данных,

65
00:05:10,715 --> 00:05:14,880
а дальше надо указать формулы,
по которым меняется набор данных.

66
00:05:14,880 --> 00:05:20,420
То есть мы создадим новую табличку,
давайте назовем ее d2.

67
00:05:20,420 --> 00:05:23,955
И эта новая табличка, мы пишем mutate(d),

68
00:05:23,955 --> 00:05:29,356
то есть мы изменяем табличку d и создаем
новую табличку, тем самым, d2, и формулы,

69
00:05:29,356 --> 00:05:34,227
по которым меняем табличку,
будут следующие: speed =...

70
00:05:34,227 --> 00:05:39,100
если вы посмотрите, скажем, «Википедию»,

71
00:05:39,100 --> 00:05:43,616
то вы обнаружите, что в одной
миле примерно 1,6 километра, то,

72
00:05:43,616 --> 00:05:47,492
соответственно, чтобы перевести
мили в час в километры в час,

73
00:05:47,492 --> 00:05:50,530
вам надо старую скорость
домножить на 1,67.

74
00:05:50,530 --> 00:05:57,764
И вы точно также обнаружите,
что один фут – это примерно 0,3 метра,

75
00:05:57,764 --> 00:06:02,064
соответственно, чтобы перевести
длину тормозного пути в метры,

76
00:06:02,064 --> 00:06:07,410
вы должны старую длину помножить на 0,3.

77
00:06:07,410 --> 00:06:12,375
Точно также можно, например,
создать новую переменную, скажем,

78
00:06:12,375 --> 00:06:17,292
отношение, во сколько раз отличается
тормозной путь от скорости,

79
00:06:17,292 --> 00:06:22,062
например, могу создать переменную ratio,
которая будет

80
00:06:22,062 --> 00:06:26,766
равняться тормозной путь
делить на скорость.

81
00:06:26,766 --> 00:06:32,856
Давайте я оформлю это выражение в
несколько строчек, чтобы его было видней.

82
00:06:32,856 --> 00:06:34,134
И здесь видно,

83
00:06:34,134 --> 00:06:39,550
что табличку d меняю в соответствии с
формулами и получаю новую табличку d2.

84
00:06:39,550 --> 00:06:43,002
Поскольку это команда из двух строчек,
мне, ну,

85
00:06:43,002 --> 00:06:46,949
либо два раза надо нажать Ctrl + Enter,
либо выделить и нажать один раз.

86
00:06:46,949 --> 00:06:51,081
Нажимаю Ctrl + Enter, Ctrl + Enter,
у меня появилась табличка d2.

87
00:06:51,081 --> 00:06:54,350
Можно точно так же
посмотреть на табличку d2.

88
00:06:54,350 --> 00:07:00,702
И здесь, соответственно, три переменных:
скорость, она уже в километрах в час,

89
00:07:00,702 --> 00:07:05,609
очень удобно, привычно,
вот скорость машины в 1920-ом году,

90
00:07:05,609 --> 00:07:09,817
вот 6,68 километров в час
или 13 километров в час,

91
00:07:09,817 --> 00:07:15,536
просто и понятно; и длина
тормозного пути 3 метра, 4,8 метра.

92
00:07:15,536 --> 00:07:21,752
Перед тем, как приступать к построению
регрессий или оценке гораздо более

93
00:07:21,752 --> 00:07:25,800
сложных моделей, обязательно посмотрите
на ваши данные, постройте графики.

94
00:07:25,800 --> 00:07:29,508
Графики позволяют не только
избежать каких-то крупных ошибок,

95
00:07:29,508 --> 00:07:31,900
но и сделать серьезные научные открытия.

96
00:07:31,900 --> 00:07:36,516
Ну, поскольку у нас набор данных не
такой богатый, у нас, собственно,

97
00:07:36,516 --> 00:07:42,360
всего две исходных переменных: скорость
машины и длина тормозного пути,

98
00:07:42,360 --> 00:07:45,084
то, соответственно,
мы построим два простых графика.

99
00:07:45,084 --> 00:07:46,925
Первый график, который мы построим,

100
00:07:46,925 --> 00:07:51,490
это будет просто график для выяснения
закона распределения, или гистограмма.

101
00:07:51,490 --> 00:07:56,000
Соответственно, мы наберем команду
для построения графиков qplot,

102
00:07:56,000 --> 00:08:00,718
данные мы возьмем из набора данных d2,
то есть мы пишем data = d2, ну,

103
00:08:00,718 --> 00:08:02,854
потому что у нас есть два набора данных,
d и d2,

104
00:08:02,854 --> 00:08:05,879
по сути это одни и те же данные,
только в разных единицах измерения.

105
00:08:05,879 --> 00:08:12,304
d – это футы и мили в час,
а d2 – это метры и километры в час.

106
00:08:12,304 --> 00:08:15,060
Ну, мы работаем с набором данных d2.

107
00:08:15,060 --> 00:08:18,918
Соответственно, и нам надо построить
гистограмму переменная длина

108
00:08:18,918 --> 00:08:19,970
тормозного пути.

109
00:08:19,970 --> 00:08:24,085
Написали функцию,
нажимаем Ctrl + Enter и получаем график.

110
00:08:24,085 --> 00:08:27,621
То есть вот мы по графику видим, что
бывает, конечно, очень длинный тормозной

111
00:08:27,621 --> 00:08:32,311
путь, вон, сколько тут, 40 метров почти,
ну, такая машина все-таки всего одна,

112
00:08:32,311 --> 00:08:36,517
потому что по вертикали отложено
количество машин, ну а большинство,

113
00:08:36,517 --> 00:08:41,330
длина тормозного пути вот, скорее,
сосредоточена вокруг 10 метров.

114
00:08:41,330 --> 00:08:43,498
Соответственно, надо всегда осознавать,

115
00:08:43,498 --> 00:08:47,584
что графики бывают двух типов: одни вы
строите для себя, по-быстрому построил,

116
00:08:47,584 --> 00:08:50,675
понял, что на графике,
представил себе данные и пошел дальше

117
00:08:50,675 --> 00:08:55,430
работать; а бывают графики, которые вы
строите для публикации, для презентации,

118
00:08:55,430 --> 00:08:59,393
и к ним надо подходить с гораздо
большими затратами времени.

119
00:08:59,393 --> 00:09:04,216
Вот этот график для публикации не годится,
что такое dist, что такое count?

120
00:09:04,216 --> 00:09:07,673
Ну, то есть мы-то знаем,
что dist – это длина тормозного пути,

121
00:09:07,673 --> 00:09:12,812
а count – это количество машин,
но нам потребуется дописать эти параметры.

122
00:09:12,812 --> 00:09:17,551
То есть если мы хотим,
чтобы график был хорошим графиком,

123
00:09:17,551 --> 00:09:23,912
то здесь надо указать подпись по оси Х
хlab =, ну, и тут мы, соответственно,

124
00:09:23,912 --> 00:09:32,120
назовем длина,
длина тормозного пути (метров).

125
00:09:32,120 --> 00:09:35,998
Точно также мы добавим подпись по оси Y,

126
00:09:35,998 --> 00:09:40,110
можно сделать команду в несколько строк.

127
00:09:40,110 --> 00:09:46,784
Соответственно, подпись по
оси Y – это количество машин,

128
00:09:46,784 --> 00:09:52,645
и точно также надо, вообще говоря,
добавить название графика,

129
00:09:52,645 --> 00:09:58,995
что это за данные, ну,
и тут напишем «Данные 1920-х годов»,

130
00:09:58,995 --> 00:10:04,176
и вот этот график уже гораздо более, так,

131
00:10:04,176 --> 00:10:10,530
что-то я тут не указал, а, я забыл,
что надо встроить переменную dist.

132
00:10:10,530 --> 00:10:13,810
Раз, два, три.

133
00:10:13,810 --> 00:10:17,174
Соответственно, вот этот
график уже более понятен.

134
00:10:17,174 --> 00:10:21,758
Критерий понятности графика очень
простой: если вы вырезаете из научной

135
00:10:21,758 --> 00:10:26,410
статьи график и понятно, что на нем
изображено, значит, это хороший график.

136
00:10:26,410 --> 00:10:30,400
Если вы вырезаете и вам надо смотреть,
ой, dist, это что такое?

137
00:10:30,400 --> 00:10:32,082
Сount, ой, это что такое?

138
00:10:32,082 --> 00:10:33,485
Это не хороший график.

139
00:10:33,485 --> 00:10:36,870
Хороший график понятен,
будучи вырезанным из работы.

140
00:10:36,870 --> 00:10:41,030
Ну, и второй график, который мы можем
построить для нашего набора данных, ну,

141
00:10:41,030 --> 00:10:43,340
на этот раз мы построим
его быстро и для себя.

142
00:10:43,340 --> 00:10:46,997
Данные возьмем из набора данных d2,

143
00:10:46,997 --> 00:10:51,919
по горизонтали отложим скорость машины,
а по вертикали

144
00:10:51,919 --> 00:10:56,314
отложим длину тормозного пути,
чтобы понять, как связаны эти переменные.

145
00:10:56,314 --> 00:11:01,711
Нажимаем Ctrl + Enter или Command + Enter
и получаем такую естественную зависимость:

146
00:11:01,711 --> 00:11:07,010
чем выше скорость машины,
тем больше длина тормозного пути.

147
00:11:07,010 --> 00:11:12,340
И, соответственно,
дальше мы сможем перейти к оценке моделей.

